# 批量修改文件后缀名功能

这是一个用于批量修改文件夹中文件后缀名的工具，支持Web界面操作和脚本下载。

## 功能特点

- 🖥️ **Web界面操作**: 通过浏览器选择文件夹，设置新旧后缀名，预览更改
- 📁 **文件夹选择**: 支持选择整个文件夹进行批量处理
- 👀 **预览模式**: 在真正重命名之前预览所有将要更改的文件
- 🔄 **批量处理**: 一次性处理多个文件，提高效率
- 📜 **脚本下载**: 提供Windows批处理脚本和Linux/Mac shell脚本
- 🛡️ **安全检查**: 防止文件覆盖，确保操作安全

## 使用方法

### 1. Web界面操作

1. 点击"浏览文件夹"选择包含需要修改后缀名的文件的文件夹
2. 输入旧后缀名和新后缀名（不需要包含点号）
3. 点击"更新文件列表"查看将要修改的文件
4. 点击"预览文件更改"确认更改内容
5. 点击"下载重命名脚本"获取可执行的脚本文件
6. 将脚本放在目标文件夹中运行，执行实际的文件重命名

### 2. 脚本使用

#### Windows批处理脚本 (.bat)

1. 下载 `rename_files.bat` 脚本
2. 将脚本放在需要修改的文件夹中
3. 双击运行脚本，或在命令提示符中执行

**注意**: 批处理脚本可能存在编码问题，Windows用户推荐使用PowerShell脚本

#### Windows PowerShell脚本 (.ps1) - 推荐

1. 下载 `rename_files.ps1` 脚本
2. 将脚本放在需要修改的文件夹中
3. 右键点击脚本，选择"使用PowerShell运行"
4. 或在PowerShell中执行：`powershell -ExecutionPolicy Bypass -File rename_files.ps1`

**优势**: 更好的UTF-8支持，彩色输出，错误处理更完善

#### Linux/Mac Shell脚本 (.sh)

1. 下载 `rename_files.sh` 脚本
2. 将脚本放在需要修改的文件夹中
3. 给脚本添加执行权限：`chmod +x rename_files.sh`
4. 运行脚本：`./rename_files.sh`

## 注意事项

⚠️ **重要提醒**:
- 文件重命名操作不可逆，请确保已备份重要文件
- 在重命名之前，系统会检查目标文件名是否已存在
- 建议先在测试文件夹中试用，确认效果后再在重要文件夹中使用

## 技术实现

- **前端**: React + TypeScript + Tailwind CSS
- **后端**: Next.js API Routes
- **文件操作**: 由于浏览器安全限制，实际文件操作通过下载的脚本执行
- **浏览器支持**: 使用webkitdirectory属性选择文件夹

## 浏览器安全限制说明

由于浏览器的安全策略，Web应用无法直接访问用户的文件系统进行重命名操作。因此，本工具采用以下工作流程：

1. **Web界面**: 用于预览和配置重命名操作
2. **脚本生成**: 根据用户设置生成可执行的脚本文件
3. **本地执行**: 用户在本地运行脚本完成实际的文件重命名

这种方式既保证了安全性，又提供了完整的批量重命名功能。

## 支持的浏览器

- Chrome 13+
- Edge 79+
- Safari 6+
- Firefox 50+

## 常见问题

### Q: 为什么无法选择文件夹？
A: 请确保使用支持webkitdirectory属性的现代浏览器，如Chrome、Edge、Safari等。

### Q: 重命名失败怎么办？
A: 检查文件权限、磁盘空间，确保目标文件名不重复，并查看错误提示信息。

### Q: 可以撤销重命名操作吗？
A: 不可以，重命名操作不可逆。建议在操作前备份重要文件。

### Q: 支持哪些文件类型？
A: 支持所有文件类型，包括图片、文档、视频、音频等。

### Q: Windows批处理脚本(.bat)出现乱码怎么办？
A: 这是Windows批处理脚本的常见编码问题。推荐使用PowerShell脚本(.ps1)，它对UTF-8支持更好，不会出现乱码问题。

### Q: 如何运行PowerShell脚本？
A: 右键点击.ps1文件，选择"使用PowerShell运行"，或在PowerShell中执行：`powershell -ExecutionPolicy Bypass -File rename_files.ps1`

## 更新日志

- v1.0.0: 初始版本，支持基本的文件后缀名批量修改功能
- v1.1.0: 添加预览模式和安全检查
- v1.2.0: 支持脚本下载，提供Windows和Linux/Mac版本
- v1.3.0: 添加PowerShell脚本支持，解决Windows批处理脚本乱码问题
