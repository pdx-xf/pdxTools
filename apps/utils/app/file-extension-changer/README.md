# 批量修改文件后缀名功能

这是一个用于批量修改文件夹中文件后缀名的工具，支持Web界面操作和脚本下载。

## 功能特点

- 🖥️ **Web界面操作**: 通过浏览器选择文件夹，设置新旧后缀名，预览更改
- 📁 **文件夹选择**: 支持选择整个文件夹进行批量处理
- 🔄 **多后缀名支持**: 支持批量修改多种后缀名
- 🔍 **智能后缀名检测**: 自动扫描文件夹，识别所有可用的文件后缀名
- 🎥 **视频演示**: 提供详细的使用演示视频，帮助用户快速掌握操作方法
- 👀 **预览模式**: 在真正重命名之前预览所有将要更改的文件
- 🔄 **批量处理**: 一次性处理多个文件，提高效率
- 📜 **智能脚本下载**: 自动检测用户平台，只下载适合的脚本文件
- 🛡️ **安全检查**: 防止文件覆盖，确保操作安全

## 使用方法

### 1. Web界面操作

1. 点击"观看使用演示"按钮，观看详细的操作演示视频（推荐新手用户）
2. 点击"浏览文件夹"选择包含需要修改后缀名的文件的文件夹
3. 系统会自动检测并显示文件夹中所有可用的文件后缀名
4. 选择要修改的文件类型（支持多种后缀名，如jpg, png, gif → webp）
5. 点击后缀名按钮选择要修改的文件类型，或手动输入后缀名
6. 输入新的后缀名（不需要包含点号）
7. 点击"更新文件列表"查看将要修改的文件
8. 点击"预览文件更改"确认更改内容
9. 点击"下载重命名脚本"获取可执行的脚本文件（系统会自动选择适合您平台的脚本）
10. 将脚本放在目标文件夹中运行，执行实际的文件重命名

### 2. 脚本使用

#### Windows批处理脚本 (.bat)

1. 下载 `rename_files.bat` 脚本
2. 将脚本放在需要修改的文件夹中
3. 双击运行脚本，或在命令提示符中执行

**注意**: 批处理脚本可能存在编码问题，Windows用户推荐使用PowerShell脚本

#### Windows PowerShell脚本 (.ps1) - 推荐

1. 下载 `rename_files.ps1` 脚本
2. 将脚本放在需要修改的文件夹中
3. 右键点击脚本，选择"使用PowerShell运行"
4. 或在PowerShell中执行：`powershell -ExecutionPolicy Bypass -File rename_files.ps1`

**优势**: 更好的UTF-8支持，彩色输出，错误处理更完善

#### Linux/Mac Shell脚本 (.sh)

1. 下载 `rename_files.sh` 脚本
2. 将脚本放在需要修改的文件夹中
3. 给脚本添加执行权限：`chmod +x rename_files.sh`
4. 运行脚本：`./rename_files.sh`

## 注意事项

⚠️ **重要提醒**:
- 文件重命名操作不可逆，请确保已备份重要文件
- 在重命名之前，系统会检查目标文件名是否已存在
- 建议先在测试文件夹中试用，确认效果后再在重要文件夹中使用

## 技术实现

- **前端**: React + TypeScript + Tailwind CSS
- **后端**: Next.js API Routes
- **文件操作**: 由于浏览器安全限制，实际文件操作通过下载的脚本执行
- **浏览器支持**: 使用webkitdirectory属性选择文件夹

## 智能脚本下载

本工具采用智能平台检测技术，能够自动识别用户的操作系统，并只下载适合的脚本文件：

- **Windows用户**: 自动下载批处理脚本(.bat)，简单易用
- **macOS/Linux用户**: 自动下载Shell脚本(.sh)，提供最佳兼容性
- **未知平台**: 下载所有平台的脚本，确保兼容性

### 平台检测原理

通过分析浏览器的User-Agent字符串，系统能够准确识别：
- Windows系统（包括Windows 10/11）
- macOS系统（包括Intel和Apple Silicon）
- Linux系统（包括各种发行版）

### Windows批处理脚本优势

选择批处理脚本作为Windows默认选项的原因：
- **简单易用**: 双击即可运行，无需额外配置
- **兼容性好**: 所有Windows版本都支持
- **无需权限**: 不需要修改PowerShell执行策略
- **用户友好**: 适合不熟悉命令行的用户

### 智能后缀名检测

本工具采用智能文件分析技术，能够自动识别文件夹中的所有文件后缀名：

- **自动扫描**: 选择文件夹后，系统自动扫描所有文件
- **后缀名识别**: 智能提取所有可用的文件扩展名
- **可视化选择**: 以按钮形式展示所有后缀名，点击即可选择
- **批量操作**: 支持全选/取消全选，快速选择多个后缀名
- **智能推荐**: 如果文件夹中只有一种后缀名，系统会自动选择并支持手动添加其他后缀名

### 视频演示功能

为了帮助用户更好地理解和使用本工具，我们提供了高清的操作演示视频：

- **高清视频**: MP4格式，支持所有现代浏览器播放
- **完整演示**: 从选择文件夹到下载脚本的完整操作流程
- **播放控制**: 支持播放、暂停、音量调节、全屏等控制
- **字幕支持**: 提供中文字幕，便于理解操作步骤
- **响应式设计**: 在电脑、平板、手机上都能正常播放

**视频内容**: 演示视频包含智能后缀名检测、多后缀名选择、文件预览、脚本下载等所有重要功能的使用方法。

## 浏览器安全限制说明

由于浏览器的安全策略，Web应用无法直接访问用户的文件系统进行重命名操作。因此，本工具采用以下工作流程：

1. **Web界面**: 用于预览和配置重命名操作
2. **脚本生成**: 根据用户设置生成可执行的脚本文件
3. **本地执行**: 用户在本地运行脚本完成实际的文件重命名

这种方式既保证了安全性，又提供了完整的批量重命名功能。

## 支持的浏览器

- Chrome 13+
- Edge 79+
- Safari 6+
- Firefox 50+

## 常见问题

### Q: 为什么无法选择文件夹？
A: 请确保使用支持webkitdirectory属性的现代浏览器，如Chrome、Edge、Safari等。

### Q: 重命名失败怎么办？
A: 检查文件权限、磁盘空间，确保目标文件名不重复，并查看错误提示信息。

### Q: 可以撤销重命名操作吗？
A: 不可以，重命名操作不可逆。建议在操作前备份重要文件。

### Q: 支持哪些文件类型？
A: 支持所有文件类型，包括图片、文档、视频、音频等。

### Q: Windows批处理脚本(.bat)出现乱码怎么办？
A: 这是Windows批处理脚本的常见编码问题。推荐使用PowerShell脚本(.ps1)，它对UTF-8支持更好，不会出现乱码问题。

### Q: 如何运行PowerShell脚本？
A: 右键点击.ps1文件，选择"使用PowerShell运行"，或在PowerShell中执行：`powershell -ExecutionPolicy Bypass -File rename_files.ps1`

### Q: 如何批量修改多种后缀名的文件？
A: 在输入框中用逗号分隔多个后缀名，如：`jpg, png, gif`，然后输入新的后缀名，如：`webp`。这样可以将所有jpg、png、gif文件统一修改为webp格式。您也可以点击检测到的后缀名按钮进行快速选择。

### Q: 支持哪些文件类型？
A: 支持所有文件类型，包括图片、文档、视频、音频等。可以同时处理多种不同后缀名的文件。

### Q: 系统会自动下载适合我平台的脚本吗？
A: 是的！系统会自动检测您的操作系统，Windows用户会下载批处理脚本，macOS/Linux用户会下载Shell脚本，确保最佳兼容性。

### Q: 可以手动选择下载其他平台的脚本吗？
A: 目前系统会根据平台自动选择最佳脚本。如果您需要其他平台的脚本，可以联系开发者或查看源代码。

### Q: 系统会自动检测文件后缀名吗？
A: 是的！选择文件夹后，系统会自动扫描所有文件，识别并显示所有可用的后缀名。您可以直接点击后缀名按钮进行选择，无需手动输入。

### Q: 如何快速选择多个后缀名？
A: 在"多个后缀名"模式下，系统会显示"全选"按钮，点击即可选择所有检测到的后缀名。您也可以单独点击每个后缀名按钮进行选择。

### Q: 有使用演示视频吗？
A: 是的！点击页面顶部的"观看使用演示"按钮即可观看高清的操作演示视频。视频将展示完整的操作流程，帮助您快速掌握使用方法。

### Q: 演示视频包含哪些内容？
A: 演示视频包含从选择文件夹到下载脚本的完整流程，包括智能后缀名检测、多后缀名选择、文件预览、脚本下载等所有重要功能的使用方法。视频采用MP4格式，支持中文字幕。

## 更新日志

- v1.0.0: 初始版本，支持基本的文件后缀名批量修改功能
- v1.1.0: 添加预览模式和安全检查
- v1.2.0: 支持脚本下载，提供Windows和Linux/Mac版本
- v1.3.0: 添加PowerShell脚本支持，解决Windows批处理脚本乱码问题
- v1.4.0: 支持多种后缀名批量修改，新增单个/多个后缀名模式切换
- v1.5.0: 新增智能平台检测，自动下载适合用户平台的脚本文件
- v1.6.0: Windows用户默认下载批处理脚本(.bat)，提供更简单的使用体验
- v1.7.0: 新增智能后缀名检测功能，自动识别文件夹中的所有文件后缀名
- v1.8.0: 简化功能，移除单个后缀名模式，专注于多后缀名批量修改
- v1.9.0: 新增高清视频演示功能，提供完整的操作演示视频
